# SSH连接工具 - EXE打包说明

## 快速打包

### 方法一：使用批处理脚本（推荐）

1. **双击运行 `build_exe.bat`**
   - 脚本会自动检查Python环境
   - 自动安装PyInstaller和依赖库
   - 自动执行打包过程

2. **打包完成后**
   - 可执行文件位于 `dist\流浪GM工具v1.0.1豪华版.exe`
   - 可以直接运行，或复制到其他位置使用

### 方法二：手动打包

1. **安装依赖**
   ```bash
   pip install -r requirements.txt
   pip install pyinstaller
   ```

2. **执行打包**
   ```bash
   pyinstaller --clean --noconfirm ssh_tool_gui.spec
   ```

3. **打包完成**
   - 可执行文件位于 `dist\流浪GM工具v1.0.1豪华版.exe`

## 打包选项说明

### 当前配置特点

- ✅ **单文件打包**：所有依赖打包成一个exe文件
- ✅ **无控制台窗口**：GUI程序，不显示命令行窗口
- ✅ **UPX压缩**：减小文件大小
- ✅ **包含配置文件**：自动包含示例配置文件

### 自定义打包选项

如果需要修改打包选项，可以编辑 `ssh_tool_gui.spec` 文件：

#### 修改程序名称
```python
name='流浪GM工具v1.0.1豪华版',  # 修改为你的程序名称
```

#### 添加程序图标
```python
icon='icon.ico',  # 添加图标文件路径
```

#### 显示控制台窗口（用于调试）
```python
console=True,  # 改为True会显示控制台窗口
```

#### 打包为文件夹模式（非单文件）
修改 `ssh_tool_gui.spec`，将 `EXE` 部分改为 `COLLECT` 模式

## 打包后文件说明

### 生成的文件结构
```
dist/
  └── 流浪GM工具v1.0.1豪华版.exe  # 可执行文件

build/
  └── (临时文件，可以删除)

ssh_tool_gui.spec  # PyInstaller配置文件
```

### 运行时的文件

程序首次运行后，会在exe同目录下自动创建以下配置文件：

- `connections.json` - 连接记录
- `gm_templates.json` - GM命令模板
- `item_ids.json` - 物品ID历史记录
- `config.json` - 配置文件（如果使用）

## 常见问题

### 1. 打包失败

**问题**：提示缺少模块
- **解决**：检查 `requirements.txt` 中的所有依赖是否已安装
- **解决**：在 `ssh_tool_gui.spec` 的 `hiddenimports` 中添加缺失的模块

### 2. 程序启动慢

**问题**：首次启动需要几秒钟
- **原因**：单文件打包模式下，程序需要解压临时文件
- **解决**：这是正常现象，后续启动会稍快一些
- **替代**：可以使用文件夹模式打包（修改spec文件）

### 3. 被杀毒软件误报

**问题**：部分杀毒软件可能误报
- **原因**：PyInstaller打包的程序可能被误判
- **解决**：添加到杀毒软件白名单
- **解决**：使用代码签名证书（需要购买）

### 4. 文件大小较大

**问题**：生成的exe文件较大（通常20-50MB）
- **原因**：包含了Python解释器和所有依赖库
- **解决**：这是正常现象，单文件打包通常较大
- **优化**：使用UPX压缩（已启用）
- **优化**：使用虚拟环境，只安装必要的依赖

### 5. 缺少依赖库

**问题**：运行exe时提示缺少某些模块
- **解决**：在 `ssh_tool_gui.spec` 的 `hiddenimports` 中添加缺失的模块
- **解决**：重新打包

## 分发程序

### 单个exe文件分发

1. 只分发 `dist\流浪GM工具v1.0.1豪华版.exe`
2. 用户双击即可运行
3. 配置文件会在首次运行时自动创建

### 带配置文件分发

如果需要包含默认配置：

1. 将配置文件放在exe同目录
2. 或者修改spec文件，将配置文件添加到 `datas` 中：
   ```python
   datas=[
       ('config.json', '.'),
       ('gm_templates.json', '.'),
   ],
   ```

## 版本更新

更新版本号：

1. 修改 `ssh_tool_gui.py` 中的版本号
2. 修改 `ssh_tool_gui.spec` 中的程序名称
3. 重新打包

## 技术支持

如果遇到打包问题，请检查：

1. Python版本（建议 3.7+）
2. PyInstaller版本（建议最新版）
3. 所有依赖库是否已正确安装
4. 是否有杀毒软件干扰

## 注意事项

- ⚠️ 打包前请确保程序可以正常运行
- ⚠️ 建议在干净的环境中打包
- ⚠️ 首次运行exe可能需要几秒钟启动时间
- ⚠️ 配置文件会保存在exe同目录下




























































